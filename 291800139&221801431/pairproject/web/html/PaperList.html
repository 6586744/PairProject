<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>论文检索</title>

    <link rel="stylesheet" href="../bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="../css/PaperList.css">
    <link rel="stylesheet" href="../LayUI/css/layui.css">

    <script src="../js/PaperList.js"></script>
    <script src="../LayUI/layui.js"></script>

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->


</head>
<body>

<nav class="navbar navbar-default">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar">15</span>
                <span class="icon-bar">test</span>
                <span class="icon-bar"></span>
            </button>
            <!--首页图标-->
            <a class="navbar-brand glyphicon glyphicon-home" href="#"> 首页 </a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav">
                <li class="active"><a href="#">论文检索 <span class="sr-only">(current)</span></a></li>
                <li><a href="#">数据分析</a></li>
            </ul>
            <form class="navbar-form navbar-left" role="search">
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search">
                    </div>
                    <button type="submit" class="btn btn-default glyphicon glyphicon-search"> 搜索 </button>
            </form>
            <ul class="nav navbar-nav navbar-right">
                <li><a href="#">登录</a></li>
                <li><a href="#">注册</a></li>
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">昵称 <span class="caret"></span></a>
                    <ul class="dropdown-menu" role="menu">
                        <li><a href="#">个人主页</a></li>
                        <li><a href="#">收藏夹</a></li>
                        <li><a href="#">问答中心</a></li>
                        <li class="divider"></li>
                        <li><a href="#">Separated link</a></li>
                        <li class="divider"></li>
                        <li><a href="#">One more separated link</a></li>
                    </ul>
                </li>
            </ul>
        </div><!-- /.navbar-collapse -->
    </div><!-- /.container-fluid -->
</nav>

<div class="container">
    <div class="row">
        <!--左侧导航-->
        <div class="col-md-2">
            <ul class="nav nav-pills nav-stacked">
                <li role="presentation" class="active"><a href="#">爬取结果</a></li>
                <li role="presentation"><a href="KeywordAtlas.html">论文热词分析</a></li>
                <li role="presentation"><a href="#">查询历史</a></li>
            </ul>
        </div>
        <!--右侧论文列表-->
        <div>
        <div class="container">
            <div class="row">
                <div class="col-md-4">
                    论文名称:
                    <div class="layui-inline">
                        <input class="layui-input" id="title" autocomplete="off">
                    </div>
                </div>
                <div class="col-md-4">
                    关键字:
                    <div class="layui-inline">
                        <input class="layui-input" id="keyword" autocomplete="off">
                    </div>
                </div>
                <div class="col-md-4 ">
                    <div class="input-group">
                        <span class="input-group-addon" id="basic-addon4">排序</span>
                        <div class="dropdown">
                            <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-expanded="true">
                                相关度
                                <span class="caret"></span>
                            </button>
                            <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu1">
                                <li role="presentation"><a role="menuitem" tabindex="-1" href="#">年份</a></li>
                                <li role="presentation"><a role="menuitem" tabindex="-1" href="#">搜索量</a></li>
                            </ul>
                        </div>
                    </div>

                </div>
                <div class="col-md-4">
                    <div class="btn-group" role="group" aria-label="...">
                        <button type="button" class="layui-btn" id="searchBtn">查询</button>
                        <button type="button" class="layui-btn" id="resetBtn" onclick="clear()">重置</button>
                    </div>
                </div>
            </div>
            <!--论文列表-->
            <div class="row">
                <div class="col-md-10 col-md-offset-1">
                    <div class="panel panel-default">
                        <div class="panel-body">
                            <table id="paperlist" lay-filter="test">
                               
                            </table>
                        </div>
                    </div>
                    <div id='page'></div>
                </div>

             <!--表格工具栏-->               
            <script type="text/html", id="toolbarDemo">
                <div class="layui-btn-container">
                    <button class="layui-btn layui-btn-sm" lay-event="getCheckData">
                        获取选中行数据
                    </button>
                    <button class="layui-btn layui-btn-sm" lay-event="getCheckLength">
                        获取选中数目
                    </button>
                    <button class="layui-btn layui-btn-sm" lay-event="isAll">
                        验证是否全选
                    </button>
                </div>
            </script>

            <!--表头工具栏-->
            <script type="text/html" id="barDemo">
                <a class="layui-btn layui-btn-danger" lay-event="del">删除</a>
            </script>


            <!--处理Ajax跨域问题-->
           <script type="text/javascript" src="../jQuery/jquery-3.6.0.js">
            $.ajax({
            url:"http://map.oicqzone.com/gpsApi.php?lat=22.502412986242&lng=113.93832783228",
            type:'GET',
            dataType:'JSONP', 
            success: function(data){
            $('body').append( "Name: " + data );
            }
            });
            </script>

            <!--加载数据表格-->
            <script type="text/javascript">
            layui.use("table",function(){
               var table = layui.table;
               var $ = layui.jquery;//获取jquery对象
                table.render({
                    elem:"#paperlist",
                    url:"../json/test.json",//数据接口--一个json
                    cols:[[
                        //设置序列号
                        {field:'no',type:"numbers"},
                        //设置复选框
                        {field:'box',type:"checkbox"},
                        {field:'摘要',title:'摘要',width:200},
                        {field:'会议和年份',title:'年份',width:100},
                        {field:'关键词',title:'关键词',width:100},
                        {field:'发布时间',title:'发布时间',width:100},
                        {field:'论文名称',title:'论文标题',width:100},
                        {field:'操作',toolbar:"#barDemo"}
                    ]],
                  
                    page:true,
                    toolbar:"#toolbarDemo"
                })
                /**
                 * 头监听事件
                 * 语法
                 *   table.on('toolbar(demo)', function(obj){
                 * });
                 *注：demo表示的是容器上设置的lay-filter属性值
                 **/
                table.on('toolbar(test)', function(obj){
                    //console.log(obj);
                    //obj.config对象中可以获取id属性值，表示当前容器的ID属性值，也就是paperlist
                    //获取当前表格被选中记录对象，返回数据
                    var checkStatus = table.checkStatus(obj.config.id);
                    console.log(checkStatus);
                    //获取事件名
                    var eventName = obj.event;
                    //判断事件名，执行对应代码
                    switch (eventName) {
                        case "getCheckData":
                            //获取被选中的数组
                            var arr = checkStatus.data;
                            layer.alert(JSON.stringify(arr));
                            break;
                        case "getCheckLength":
                            //获取选中长度
                            break;
                        case "isAll":
                            break;
                        default:
                            break;

                    }
                });

                /**
                 * 监听行工具栏事件--删除
                 * 
                 **/
                table.on('tool(test)',function(obj){
                    //得到当前操作行的相关信息
                    var tr = obj.data;
                    //console.log(tr);
                    //得到事件名
                    var eventName = obj.event;
                    //判断事件后，执行删除操作
                    if(eventName == 'del') {
                        layer.confirm("您确认要删除吗？",function(index){
                            //删除指定tr del()
                            obj.del();
                            //关闭弹出层(index是当前弹出层下标)
                            layer.close(index);
                        })
                    }
                });

                /**
                 * 给指定元素绑定事件
                 * 查询和重置按钮
                 **/
                $(document).on('click','#searchBtn',function(data){
                    //获取搜索本文框对象
                    var searchTitle = $("#reload");
                    var serachKeyword = $("#reload");
                    //排序？

                    //调用数据表格重载方法
                    table.reload('tablelist',{
                        where:{
                            //设置需要传递的参数
                            title:searchTitle.val(),//键
                            //值
                        
                        },
                        page:{
                            //让条件查询从第一页开始,若未设置则默认按当前页进行查询，且此页之前数据不再纳入条件筛选
                            curr:1//从第一页开始
                        }
                    })
                });

                function clear() {
                    document.getElementById("reload").value="";
                }
                });
            </script>
                        
               
            </div>

           



            <!--分页js-->
            <script type="text/javascript">
            layui.use("laypage",function() {
                var laypage = layui.laypage;
                //加载laypage实例
                laypage.render({
                    elem:"page",//绑id
                    count:100,//总数量
                    limit:5,
                    limits:[5,10,20,30],//每页条数的选择项
                    layout:['prev','page','next','limit','count'],//自定义排版
                });
            
            });
            </script>
        </div>
        </div>


    </div>
</div>


<!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
<script src="http://code.jquery.com/jquery-1.11.2.min.js"></script>
<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src="../bootstrap/js/bootstrap.min.js"></script>
</body>
</html>